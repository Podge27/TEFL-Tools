<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TEFL Tools Timer</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f1f5f9;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    color: #0f172a;
  }
  h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
  }
  .mode-select button {
    padding: 15px 25px;
    margin: 10px;
    font-size: 1.4rem;
    border: none;
    border-radius: 15px;
    background: #3b82f6;
    color: white;
    cursor: pointer;
  }
  .time-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 20px;
    max-width: 900px;
  }
  .time-buttons button {
    padding: 15px;
    margin: 8px;
    font-size: 1.2rem;
    border: none;
    border-radius: 12px;
    background: #10b981;
    color: white;
    cursor: pointer;
    width: 120px;
  }
  #display {
    font-size: 4rem;
    margin-top: 25px;
    font-weight: bold;
  }
  .controls button {
    padding: 15px 25px;
    margin: 10px;
    font-size: 1.4rem;
    border: none;
    border-radius: 15px;
    background: #64748b;
    color: white;
    cursor: pointer;
  }
  .adjust button {
    padding: 15px 20px;
    margin: 10px;
    font-size: 1.2rem;
    border: none;
    border-radius: 12px;
    background: #f59e0b;
    color: white;
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>TEFL Tools Timer</h1>

<div class="mode-select">
  <button onclick="setMode('timer')">Timer</button>
  <button onclick="setMode('stopwatch')">Stopwatch</button>
</div>

<div id="timeSelect" class="time-buttons"></div>

<div id="display">00:00</div>

<div class="adjust" id="adjustControls" style="display:none;">
  <button onclick="adjustTime(30)">+30 sec</button>
  <button onclick="adjustTime(-30)">-30 sec</button>
</div>

<div class="controls" id="mainControls" style="display:none;">
  <button onclick="startTimer()">Start</button>
  <button onclick="pauseTimer()">Pause</button>
  <button onclick="resetTimer()">Clear</button>
  <button onclick="goBack()">Back</button>
</div>

<audio id="beep" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

<script>
let totalSeconds = 0;
let interval = null;
let mode = "timer";

const timeOptions = [10, 30, 40, 45, 60, 90, 120, 150, 180, 240, 300, 600, 1200, 2400, 2700];

function setMode(selected) {
  mode = selected;
  document.getElementById('timeSelect').innerHTML = '';
  document.getElementById('adjustControls').style.display = 'none';
  document.getElementById('mainControls').style.display = 'none';
  document.getElementById('display').textContent = '00:00';

  if (mode === 'timer') generateTimeButtons();
  else prepareStopwatch();
}

function generateTimeButtons() {
  const container = document.getElementById('timeSelect');
  timeOptions.forEach(sec => {
    const btn = document.createElement('button');
    btn.textContent = formatTime(sec);
    btn.onclick = () => selectTime(sec);
    container.appendChild(btn);
  });
}

function selectTime(sec) {
  totalSeconds = sec;
  updateDisplay();
  document.getElementById('adjustControls').style.display = 'block';
  document.getElementById('mainControls').style.display = 'block';
}

function prepareStopwatch() {
  totalSeconds = 0;
  updateDisplay();
  document.getElementById('adjustControls').style.display = 'none';
  document.getElementById('mainControls').style.display = 'block';
}

function adjustTime(amount) {
  totalSeconds = Math.max(0, totalSeconds + amount);
  updateDisplay();
}

function startTimer() {
  if (interval) return;
  interval = setInterval(() => {
    if (mode === 'timer') {
      totalSeconds--;
      if (totalSeconds <= 0) {
        totalSeconds = 0;
        playSound();
        clearInterval(interval);
        interval = null;
      }
    } else {
      totalSeconds++;
    }
    updateDisplay();
  }, 1000);
}

function pauseTimer() {
  clearInterval(interval);
  interval = null;
}

function resetTimer() {
  clearInterval(interval);
  interval = null;
  totalSeconds = 0;
  updateDisplay();
}

function goBack() {
  pauseTimer();
  setMode('timer');
}

function updateDisplay() {
  document.getElementById('display').textContent = formatTime(totalSeconds);
}

function formatTime(sec) {
  let m = Math.floor(sec / 60);
  let s = sec % 60;
  return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
}

function playSound() {
  document.getElementById('beep').play();
}
</script>
</body>
</html>
