<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use of English Trainer (Part 4)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style type="text/tailwindcss">
        /* General Styles */
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; min-height: 100vh; }
        #app-container { @apply w-full max-w-7xl; background-color: white; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); border-radius: 16px; min-height: 700px; display: flex; flex-direction: column; }

        /* --- TEXT SIZES --- */
        .question-text { font-size: 1.8rem; line-height: 1.4; font-weight: 700; color: #1f2937; }
        @media (min-width: 768px) { .question-text { font-size: 2.5rem; } }
        
        .key-word { background-color: #facc15; padding: 8px 24px; border-radius: 12px; font-weight: 900; font-size: 2.5rem; color: #1f2937; text-transform: uppercase; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 2px solid #eab308; display: inline-block; }
        
        .answer-gap { @apply p-2 border-b-4 border-amber-400 text-xl font-bold transition duration-150 flex-1; min-width: 250px; text-transform: uppercase; letter-spacing: 1px; text-align: center; line-height: 1.5; min-height: 45px; color: #facc15; display: inline-flex; justify-content: center; align-items: center; cursor: pointer; }
        .answer-input { @apply p-2 border-4 border-indigo-300 rounded-lg text-xl font-bold text-indigo-700 placeholder-indigo-400 focus:ring-4 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150; text-transform: uppercase; letter-spacing: 1px; min-width: 250px; }

        /* UI Elements */
        .key-word-small { background-color: #facc15; padding: 2px 8px; border-radius: 6px; font-weight: 800; font-size: 1rem; color: #1f2937; text-transform: uppercase; border: 1px solid #eab308; display: inline-block; vertical-align: middle; }
        .input-correct { @apply border-green-500 bg-green-50 text-green-800; }
        .input-partial { @apply border-yellow-500 bg-yellow-50 text-yellow-800; }
        .input-wrong { @apply border-red-500 bg-red-50 text-red-800; }
        .answer-gap.revealed { background-color: #d1fae5; color: #10b981; border-bottom-color: #10b981; cursor: pointer; }

        /* Buttons */
        .app-btn { @apply px-6 py-3 font-bold rounded-xl shadow-lg transition duration-200 transform hover:scale-[1.02] active:scale-95; }
        
        .level-select-btn { font-size: 4.5rem; padding: 3rem 4rem; min-width: 100%; @apply font-black rounded-[2rem] transition duration-300 transform; border-width: 4px; transform: scale(1); cursor: pointer; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6), 0 0 10px rgba(255, 255, 255, 0.4) inset; opacity: 0.7; filter: grayscale(0.5); }
        .level-select-btn.active { transform: scale(1.05) translateY(-5px); opacity: 1; filter: grayscale(0); z-index: 10; @apply ring-4 ring-offset-4 ring-indigo-500; }
        .level-select-btn:hover { transform: scale(1.05) translateY(-5px); opacity: 1; filter: grayscale(0); }

        .btn-b2-style { background: linear-gradient(145deg, #4F46E5 0%, #818CF8 100%); color: white; border-color: #C7D2FE; }
        .btn-c1-style { background: linear-gradient(145deg, #FF9800 0%, #FFC107 100%); color: #333; border-color: #FFECB3; }
        .btn-c2-style { background: linear-gradient(145deg, #8BC34A 0%, #CDDC39 100%); color: #333; border-color: #DCEDC8; }

        .mode-select-btn { @apply flex flex-col items-center justify-center p-8 rounded-[1.5rem] border-4 border-gray-200 bg-white text-gray-500 transition-all duration-200 cursor-pointer shadow-md hover:border-indigo-300 hover:bg-indigo-50 hover:shadow-xl hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed; min-height: 200px; width: 100%; }
        .mode-select-btn.active { @apply border-indigo-500 bg-indigo-50 text-indigo-700 shadow-xl ring-4 ring-offset-4 ring-indigo-500; transform: translateY(-5px); }

        .btn-start { @apply bg-indigo-600 text-white hover:bg-indigo-700; }
        .btn-next { @apply bg-blue-500 text-white hover:bg-blue-600; }
        .btn-final { @apply bg-amber-500 text-gray-800 hover:bg-amber-600 text-xl py-4; }
        .btn-secondary { @apply bg-gray-500 text-white hover:bg-gray-600; }
        
        #timer-display { font-size: 2.5rem; font-weight: 900; color: #ef4444; }
        .time-alert { animation: pulse-red 1s infinite; }
        @keyframes pulse-red { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .exam-question-card { @apply p-4 border border-gray-300 rounded-xl mb-4 bg-gray-50; }
    </style>
</head>
<body class="p-4 sm:p-8 flex flex-col items-center justify-center relative">

    <a id="main-menu-btn" href="exam_index.html" class="absolute top-6 left-6 flex items-center gap-2 text-gray-600 hover:text-indigo-700 font-bold transition z-50 group">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform group-hover:-translate-x-1 transition" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
        <span>Back to Menu</span>
    </a>

    <div id="app-container" class="w-full p-6 md:p-10">
        <h1 class="text-4xl font-extrabold text-gray-900 text-center my-8">Use of English Part 4 Trainer</h1>

        <div id="screen-dashboard" class="flex-1 p-8 flex flex-col gap-8 max-w-5xl mx-auto w-full">
            <div>
                <h3 class="text-2xl font-bold mb-6 text-center text-gray-700">1. Select Level</h3>
                <div class="grid grid-cols-3 gap-6 w-full">
                    <button onclick="app.selectLevel('B2')" id="btn-b2" class="level-select-btn btn-b2-style">B2</button>
                    <button onclick="app.selectLevel('C1')" id="btn-c1" class="level-select-btn btn-c1-style">C1</button>
                    <button onclick="app.selectLevel('C2')" id="btn-c2" class="level-select-btn btn-c2-style">C2</button>
                </div>
            </div>
            <div>
                <h3 class="text-2xl font-bold mb-6 text-center text-gray-700">2. Select Mode</h3>
                <div class="grid grid-cols-2 gap-6 w-full">
                    <button onclick="app.selectMode('free')" id="mode-free" disabled class="mode-select-btn">
                        <span class="text-6xl mb-4">üè´</span>
                        <span class="text-3xl font-bold text-gray-800">Classroom Style</span>
                        <span class="text-lg mt-2">Interactive. Click to reveal.</span>
                    </button>
                    <button onclick="app.selectMode('exam')" id="mode-exam" disabled class="mode-select-btn">
                        <span class="text-6xl mb-4">üìù</span>
                        <span class="text-3xl font-bold text-gray-800">Exam Style</span>
                        <span class="text-lg mt-2">Scored. 6 Questions. Timer.</span>
                    </button>
                </div>
            </div>
            <div class="mt-4 flex justify-center">
                <button onclick="app.startActivity()" id="start-btn" disabled class="app-btn bg-indigo-600 text-white text-3xl px-16 py-6 shadow-2xl disabled:opacity-30 disabled:cursor-not-allowed hover:bg-indigo-700 transition transform hover:scale-105">Start Activity ‚Üí</button>
            </div>
            <p id="data-loading-status" class="text-center text-sm text-gray-500 mt-12 min-h-[20px]">Connecting to Database...</p>
        </div>

        <div id="screen-free" class="hidden flex-1 p-8 flex flex-col items-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Free Study Mode (<span id="fs-level-display"></span>)</h2>
            
            <div id="fs-question-card" class="w-full max-w-6xl p-8 border-4 border-gray-200 rounded-xl space-y-4 bg-white shadow-sm">
                <p id="fs-sentence1" class="question-text text-gray-600">Sentence 1...</p>
                <div class="flex flex-wrap justify-center items-center gap-4 my-4"><span id="fs-key-word" class="key-word">KEY</span></div>
                <div class="flex flex-wrap items-center gap-2 question-text">
                    <span id="fs-sentence2-pre">Pre</span>
                    <span id="fs-answer-gap" class="answer-gap flex-1" data-answer="" data-revealed="false" onclick="app.toggleFreeStudyAnswer()">[Click for Answer]</span>
                    <span id="fs-sentence2-post">Post</span>
                </div>
            </div>
            <div id="fs-feedback" class="text-xl font-semibold mt-4 mb-6 text-center min-h-[30px] text-gray-600"></div>
            <div class="flex justify-center gap-4 mt-6"><button onclick="app.nextFreeQuestion()" class="app-btn btn-next w-full max-w-[250px]">Next Question ‚Üí</button></div>
            <button onclick="app.showDashboard()" class="app-btn btn-secondary mt-8 w-full max-w-[200px]">‚Üê Back</button>
        </div>

        <div id="screen-exam" class="hidden flex-1 flex flex-col">
            <div class="flex justify-between items-center mb-6 border-b pb-4 px-8 pt-4">
                <h2 class="text-3xl font-bold text-gray-800">Exam Mode (<span id="exam-level-display"></span>)</h2>
                <div class="flex flex-col items-end"><span id="timer-display">06:00</span><span class="text-sm text-gray-500">6 Questions (2 marks each)</span></div>
            </div>
            <div id="exam-questions-container" class="flex-1 overflow-y-auto px-8 pb-4"></div>
            <div class="p-6 bg-white border-t border-gray-200 flex justify-between items-center">
                 <button onclick="app.showDashboard()" class="px-6 py-3 bg-gray-500 text-white rounded-lg font-bold hover:bg-gray-600">Back</button>
                 <div id="score-area" class="hidden text-3xl font-black text-gray-800">Score: <span id="score-val" class="text-indigo-600">0</span>/12</div>
                 <div class="flex gap-4">
                     <button onclick="app.submitExam()" id="submit-exam-button" class="app-btn btn-final w-full max-w-sm">Submit Exam & Get Score</button>
                     <button onclick="app.startExam()" id="reset-exam-button" class="hidden px-8 py-3 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700">New Exam</button>
                 </div>
            </div>
        </div>

        <div id="screen-results" class="hidden flex-1 flex flex-col p-8">
            <h2 class="text-4xl font-extrabold text-indigo-600 text-center mb-6">Exam Results</h2>
            <div class="p-6 bg-gray-100 rounded-xl space-y-4 text-center">
                <p class="text-3xl font-bold text-gray-700">Your Score: <span id="final-score" class="text-green-600">0/12</span></p>
                <p id="results-time-taken" class="xl text-gray-600"></p>
            </div>
            <h3 class="text-2xl font-bold mt-8 mb-4 border-b pb-2">Review Answers:</h3>
            <div id="review-answers-container" class="space-y-4 flex-1 overflow-y-auto"></div>
            <button onclick="app.showDashboard()" class="app-btn btn-start mt-8 w-full max-w-sm mx-auto block">Start New Practice</button>
        </div>
    </div>

    <script>
        // ============================================================
        // üëá 2. PASTE YOUR KEYS HERE
        // ============================================================
        const SUPABASE_URL = "https://ehhkjhyanmovymjqlxwo.supabase.co"; 
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVoaGtqaHlhbm1vdnltanFseHdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczODI3NzQsImV4cCI6MjA4Mjk1ODc3NH0.LIbusFxccfDl_Jxf3NO0CIKo4WRUA-88R9bQwQ1QWuk";

        // ============================================================

        const app = {
            supabase: null,
            data: [],
            filteredData: [],
            state: { level: null, mode: null, currentIndex: 0, timer: null, timeRemaining: 360, totalTime: 360 },
            examQuestions: [],

            init: async function() {
                const status = document.getElementById('data-loading-status');
                
                if (typeof supabase !== 'undefined') {
                    this.supabase = supabase.createClient(String(SUPABASE_URL).trim(), String(SUPABASE_KEY).trim());
                } else {
                    status.innerText = "Error: Library not loaded.";
                    return;
                }

                await this.loadData();
                this.switchScreen('screen-dashboard');
            },

            loadData: async function() {
                const status = document.getElementById('data-loading-status');
                try {
                    status.innerText = "Loading data from Supabase...";
                    
                    let { data, error } = await this.supabase
                        .from('exam_part4') 
                        .select('*');

                    if (error) throw error;
                    
                    this.data = data;
                    status.innerText = `Ready. Loaded ${data.length} questions.`;
                    status.className = "text-center text-sm text-green-500 mt-4 font-bold";
                } catch (error) {
                    console.error("Connection Error:", error);
                    this.data = []; 
                    status.innerText = "Error loading data. Check console.";
                    status.className = "text-center text-sm text-red-500 mt-4 font-bold";
                }
                this.updateUI();
            },

            // --- DASHBOARD LOGIC ---
            selectLevel: function(lvl) {
                this.state.level = lvl;
                this.updateUI();
            },

            selectMode: function(m) {
                this.state.mode = m;
                this.updateUI();
            },

            updateUI: function() {
                // Levels
                ['b2','c1','c2'].forEach(l => {
                    const btn = document.getElementById(`btn-${l}`);
                    btn.classList.remove('active');
                    if(this.state.level && l === this.state.level.toLowerCase()) btn.classList.add('active');
                });

                // Modes & Start Button logic
                const pool = this.data.filter(q => q.level === this.state.level);
                
                const btnFree = document.getElementById('mode-free');
                const btnExam = document.getElementById('mode-exam');
                
                btnFree.disabled = !this.state.level || pool.length === 0;
                btnExam.disabled = !this.state.level || pool.length < 6;

                ['free','exam'].forEach(m => {
                    const btn = document.getElementById(`mode-${m}`);
                    btn.classList.remove('active');
                    if(this.state.mode === m) btn.classList.add('active');
                });

                const canStart = this.state.level && this.state.mode;
                const validExam = this.state.mode === 'exam' ? pool.length >= 6 : true;
                
                document.getElementById('start-btn').disabled = !(canStart && validExam);
            },

            startActivity: function() {
                const pool = this.data.filter(q => q.level === this.state.level);
                if(this.state.mode === 'free') {
                    pool.sort(() => Math.random() - 0.5);
                    this.filteredData = pool;
                    this.state.currentIndex = 0;
                    this.showFreeQuestion();
                    this.switchScreen('screen-free');
                } else {
                    this.startExam();
                }
            },

            // --- FREE STUDY ---
            getWordCountRule: function() {
                if (this.state.level === 'C1') return "3 and 6 words";
                if (this.state.level === 'C2') return "3 and 8 words";
                return "2 and 5 words"; // B2 default
            },

            showFreeQuestion: function() {
                if(this.filteredData.length === 0) return;
                const q = this.filteredData[this.state.currentIndex];
                
                document.getElementById('fs-level-display').innerText = this.state.level;
                document.getElementById('fs-sentence1').innerText = `1. ${q.sentence1}`;
                document.getElementById('fs-key-word').innerText = q.key_word;
                document.getElementById('fs-sentence2-pre').innerText = `2. ${q.sentence2_pre}`;
                document.getElementById('fs-sentence2-post').innerText = q.sentence2_post;
                
                const elGap = document.getElementById('fs-answer-gap');
                elGap.innerText = "[Click for Answer]";
                elGap.classList.remove('revealed');
                elGap.dataset.revealed = 'false';
                
                // Determine clean answer
                let ans = "";
                if(Array.isArray(q.answers)) ans = q.answers[0];
                else if(q.answer) ans = q.answer;
                else if(q.answers) ans = q.answers; 
                
                elGap.dataset.answer = ans.replace(/\s*\|\s*/g, ' '); 
                
                const rule = this.getWordCountRule();
                document.getElementById('fs-feedback').innerText = `The answer is between ${rule}.`;
                document.getElementById('fs-feedback').className = "text-xl font-semibold mt-4 mb-6 text-center min-h-[30px] text-gray-600";
            },

            toggleFreeStudyAnswer: function() {
                const el = document.getElementById('fs-answer-gap');
                const feedback = document.getElementById('fs-feedback');
                
                if(el.dataset.revealed === 'true') {
                    el.innerText = "[Click for Answer]";
                    el.classList.remove('revealed');
                    el.dataset.revealed = 'false';
                    const rule = this.getWordCountRule();
                    feedback.innerText = `The answer is between ${rule}.`;
                    feedback.className = "text-xl font-semibold mt-4 mb-6 text-center min-h-[30px] text-gray-600";
                } else {
                    el.innerText = el.dataset.answer;
                    el.classList.add('revealed');
                    el.dataset.revealed = 'true';
                    feedback.innerText = `CORRECT: ${el.dataset.answer}`;
                    feedback.className = "text-xl font-semibold mt-4 mb-6 text-center min-h-[30px] text-green-600";
                }
            },

            nextFreeQuestion: function() {
                this.state.currentIndex = (this.state.currentIndex + 1) % this.filteredData.length;
                this.showFreeQuestion();
            },

            // --- EXAM MODE ---
            startExam: function() {
                const pool = this.data.filter(q => q.level === this.state.level);
                pool.sort(() => Math.random() - 0.5);
                this.examQuestions = pool.slice(0, 6);
                
                this.state.timeRemaining = 360; 
                this.state.totalTime = 360;
                this.renderExam();
                this.startTimer();
                this.switchScreen('screen-exam');
            },

            renderExam: function() {
                const container = document.getElementById('exam-questions-container');
                container.innerHTML = '';
                document.getElementById('exam-level-display').innerText = this.state.level;
                
                document.getElementById('submit-exam-button').classList.remove('hidden');
                document.getElementById('reset-exam-button').classList.add('hidden');
                document.getElementById('score-area').classList.add('hidden');

                this.examQuestions.forEach((q, idx) => {
                    const div = document.createElement('div');
                    div.className = 'exam-question-card';
                    div.innerHTML = `
                        <p class="text-xl font-bold mb-3 text-indigo-700">Question ${idx + 1} of 6</p>
                        <p class="question-text text-gray-600 mb-2">A. ${q.sentence1}</p>
                        <div class="flex flex-wrap justify-center items-center gap-4 mb-4"><span class="key-word">${q.key_word}</span></div>
                        <div class="flex flex-wrap items-center gap-2 question-text">
                            <span class="text-2xl">${q.sentence2_pre}</span>
                            <input type="text" id="input-${idx}" class="answer-input flex-1 p-2 border-2 border-indigo-400 rounded-md text-base" placeholder="Type answer..." oninput="this.value = this.value.toUpperCase()">
                            <span class="text-2xl">${q.sentence2_post}</span>
                        </div>`;
                    container.appendChild(div);
                });
            },

            startTimer: function() {
                if(this.state.timer) clearInterval(this.state.timer);
                this.updateTimerDisplay();
                
                this.state.timer = setInterval(() => {
                    this.state.timeRemaining--;
                    this.updateTimerDisplay();
                    if(this.state.timeRemaining <= 0) {
                        this.submitExam();
                    }
                }, 1000);
            },

            updateTimerDisplay: function() {
                const m = Math.floor(this.state.timeRemaining / 60);
                const s = this.state.timeRemaining % 60;
                const text = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
                const el = document.getElementById('timer-display');
                el.innerText = text;
                if(this.state.timeRemaining <= 30) el.classList.add('time-alert');
                else el.classList.remove('time-alert');
            },

            cleanText: function(text) {
                return text.toUpperCase().replace(/[.,;!]/g, '').replace(/\s\s+/g, ' ').trim();
            },

            submitExam: function() {
                clearInterval(this.state.timer);
                document.getElementById('submit-exam-button').classList.add('hidden');
                
                let totalScore = 0;
                const userAnswers = [];

                this.examQuestions.forEach((q, idx) => {
                    const input = document.getElementById(`input-${idx}`);
                    const userVal = this.cleanText(input.value);
                    
                    let validAnswers = [];
                    if (Array.isArray(q.answers)) validAnswers = q.answers;
                    else if (q.answer) validAnswers = [q.answer];
                    else if (q.answers) validAnswers = [q.answers];

                    let points = 0;
                    let correctDisplay = "";

                    for (let rawOption of validAnswers) {
                        const rawOptionUpper = rawOption.toUpperCase();
                        const cleanOption = this.cleanText(rawOptionUpper.replace(/\s*\|\s*/g, ' '));
                        let currentPoints = 0;

                        if (userVal === cleanOption) {
                            currentPoints = 2;
                        } else if (rawOptionUpper.includes('|')) {
                            const parts = rawOptionUpper.split('|').map(p => this.cleanText(p));
                            if (userVal.startsWith(parts[0])) currentPoints++;
                            if (userVal.endsWith(parts[1])) currentPoints++;
                        }
                        if (currentPoints > points) {
                            points = currentPoints;
                            correctDisplay = cleanOption;
                        }
                    }
                    if (points === 0 && !correctDisplay) correctDisplay = this.cleanText(validAnswers[0].replace(/\s*\|\s*/g, ' '));

                    totalScore += points;
                    
                    input.disabled = true;
                    if(points === 2) input.classList.add('input-correct');
                    else if(points === 1) input.classList.add('input-partial');
                    else input.classList.add('input-wrong');

                    userAnswers.push({ 
                        q, 
                        userVal, 
                        points, 
                        correct: validAnswers.map(a => a.replace(/\s*\|\s*/g, ' ')).join(' OR ') 
                    });
                });

                document.getElementById('score-val').innerText = totalScore;
                document.getElementById('score-area').classList.remove('hidden');
                document.getElementById('reset-exam-button').classList.remove('hidden');

                this.renderResults(totalScore, userAnswers);
                this.switchScreen('screen-results');
            },

            renderResults: function(score, answers) {
                const elScore = document.getElementById('final-score');
                elScore.innerText = `${score}/12`;
                elScore.className = `text-3xl font-bold ${score >= 10 ? 'text-green-600' : score >= 6 ? 'text-yellow-600' : 'text-red-600'}`;
                
                const timeTaken = this.state.totalTime - this.state.timeRemaining;
                const m = Math.floor(timeTaken / 60);
                const s = timeTaken % 60;
                document.getElementById('results-time-taken').innerText = `Time: ${m}:${String(s).padStart(2,'0')}`;

                const container = document.getElementById('review-answers-container');
                container.innerHTML = '';
                
                answers.forEach((item, idx) => {
                    const q = item.q;
                    let color = 'bg-red-100 border-red-500';
                    let icon = '‚úò Incorrect (0 pts)';
                    let hl = 'bg-red-300';
                    
                    if(item.points === 2) { color = 'bg-green-100 border-green-500'; icon = '‚úî Correct (2 pts)'; hl = 'bg-green-300'; }
                    else if(item.points === 1) { color = 'bg-yellow-100 border-yellow-500'; icon = '‚ö†Ô∏è Partial (1 pt)'; hl = 'bg-yellow-300'; }

                    const div = document.createElement('div');
                    div.className = `p-4 border-l-4 rounded-lg ${color}`;
                    div.innerHTML = `
                        <p class="text-lg font-bold">Q${idx + 1}. ${icon}</p>
                        <p class="question-text text-gray-700 mt-1">A. ${q.sentence1}</p>
                        <div class="mt-2 text-gray-800">
                            <span class="font-semibold">${q.sentence2_pre}</span> 
                            <span class="font-extrabold p-1 rounded ${hl}">${item.userVal || '[No Answer]'}</span> 
                            <span class="font-semibold">${q.sentence2_post}</span> 
                            (<span class="key-word-small">${q.key_word}</span>)
                        </div>
                        ${item.points < 2 ? `<p class="mt-2 text-sm text-green-700">Correct: <span class="font-bold">${item.correct}</span></p>` : ''}
                    `;
                    container.appendChild(div);
                });
            },

            switchScreen: function(id) {
                ['screen-dashboard','screen-free','screen-exam','screen-results'].forEach(s => document.getElementById(s).classList.add('hidden'));
                document.getElementById(id).classList.remove('hidden');
                window.scrollTo(0,0);
                
                const menuBtn = document.getElementById('main-menu-btn');
                if(id === 'screen-dashboard') menuBtn.classList.remove('hidden');
                else menuBtn.classList.add('hidden');
            },

            showDashboard: function() { 
                if(this.state.timer) clearInterval(this.state.timer);
                this.switchScreen('screen-dashboard'); 
            }
        };

        app.init();
    </script>
</body>
</html>