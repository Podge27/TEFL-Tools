<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashy Random Number Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #f97316;
            --bg-color: #0f172a;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            transition: background-color 0.3s ease;
        }

        .app-button {
            @apply px-4 py-2 font-bold rounded-xl shadow-md transition duration-300 transform hover:scale-[1.02] active:scale-95;
        }

        .input-field {
            @apply w-full p-3 rounded-xl border-2 border-slate-700 bg-slate-800 text-white focus:ring-2 focus:ring-primary-color focus:border-primary-color transition duration-300;
        }

        .control-label {
            @apply block text-sm font-medium text-slate-300 mb-1;
        }

        .big-number-display {
            background-image: linear-gradient(45deg, #f97316, #facc15, #84cc16);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(249, 115, 22, 0.5);
            transition: transform 0.1s ease-out, opacity 0.3s ease-in-out;
            min-height: 200px;
        }

        @keyframes pop {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .pop-animation {
            animation: pop 0.4s ease-out;
        }
        
        /* Reset button is Red to indicate it clears the memory */
        #reset-pool-button {
            background-color: #dc2626;
            color: white;
            min-width: 100px; /* Added width so it doesn't look too small */
        }
        #reset-pool-button:hover {
            background-color: #b91c1c;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-4xl bg-slate-900 p-6 md:p-10 rounded-2xl shadow-2xl border border-slate-700">
        
        <h1 class="text-3xl font-extrabold text-center mb-6 text-white tracking-wider">
            ðŸŽ² The Flashy Number Factory
        </h1>

        <div id="number-display" 
             class="big-number-display text-7xl md:text-9xl lg:text-[10rem] font-black text-center mb-8 flex items-center justify-center select-none"
             aria-live="polite">
            ?
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            
            <div class="col-span-1">
                <label for="min-input" class="control-label">Min Value</label>
                <input type="number" id="min-input" value="1" min="0" class="input-field">
            </div>

            <div class="col-span-1">
                <label for="max-input" class="control-label">Max Value</label>
                <input type="number" id="max-input" value="6" min="1" class="input-field">
            </div>

            <div class="col-span-1">
                <label for="count-input" class="control-label">How Many to Draw?</label>
                <input type="number" id="count-input" value="1" min="1" max="100" class="input-field">
            </div>

        </div>
        
        <button id="generate-button"
                class="w-full py-4 text-xl font-bold rounded-xl shadow-lg 
                       bg-gradient-to-r from-primary-color to-secondary-color 
                       text-white uppercase tracking-widest hover:shadow-primary-color/50 
                       hover:from-secondary-color hover:to-primary-color transition duration-300 transform hover:scale-[1.01] active:scale-95">
            GENERATE NUMBERS
        </button>
        
        <div id="pool-controls" class="mt-4 flex justify-between items-center">
            <span id="unique-info" class="text-sm font-medium text-slate-300">
                Pool Size: 0
            </span>
            <button id="reset-pool-button" class="app-button" onclick="forceReset()">
                Reset
            </button>
        </div>

        <div id="message-box" class="mt-4 p-3 hidden rounded-xl bg-red-800 text-white font-semibold transition duration-300"></div>

        <div id="results-list-container" class="mt-6 hidden">
            <h3 class="text-xl font-bold text-slate-200 mb-3 border-b border-slate-700 pb-2">History (Current Batch):</h3>
            <div id="results-list" class="flex flex-wrap gap-2 p-3 bg-slate-800 rounded-xl max-h-40 overflow-y-auto"></div>
        </div>

    </div>

    <script>
        // --- DATA STORAGE ---
        let numberPool = [];    
        let savedMin = null;    
        let savedMax = null;    

        // --- DOM ELEMENTS ---
        const display = document.getElementById('number-display');
        const minInput = document.getElementById('min-input');
        const maxInput = document.getElementById('max-input');
        const countInput = document.getElementById('count-input');
        const messageBox = document.getElementById('message-box');
        const resultsList = document.getElementById('results-list');
        const resultsContainer = document.getElementById('results-list-container');
        const uniqueInfo = document.getElementById('unique-info');

        // Helper: Show Message
        function showMessage(text, isError = true) {
            messageBox.textContent = text;
            messageBox.classList.remove('hidden', 'bg-red-800', 'bg-green-800');
            messageBox.classList.add(isError ? 'bg-red-800' : 'bg-green-800');
        }

        // Helper: Create a pill for the history list
        function addResultPill(num) {
            const pill = document.createElement('span');
            pill.textContent = num;
            pill.className = 'px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm font-mono border border-blue-500/50';
            resultsList.appendChild(pill);
            resultsContainer.classList.remove('hidden');
        }

        // --- CORE LOGIC ---

        // 1. FILL THE HAT
        function fillPool(min, max) {
            numberPool = [];
            for (let i = min; i <= max; i++) {
                numberPool.push(i);
            }
            // Shuffle
            numberPool.sort(() => Math.random() - 0.5);
            
            savedMin = min;
            savedMax = max;
            
            uniqueInfo.textContent = `Numbers left in pool: ${numberPool.length}`;
            showMessage(`Deck shuffled! Range: ${min}-${max}`, false);
            
            resultsList.innerHTML = ''; 
            resultsContainer.classList.add('hidden');
        }

        // 2. MAIN ACTION (Generate)
        function generate() {
            messageBox.classList.add('hidden'); 

            const currentMin = parseInt(minInput.value);
            const currentMax = parseInt(maxInput.value);
            const count = parseInt(countInput.value);

            if (currentMin >= currentMax) return showMessage("Min must be smaller than Max.");
            if (count < 1) return showMessage("You must draw at least 1 number.");

            // If settings changed, reset everything
            if (currentMin !== savedMin || currentMax !== savedMax) {
                fillPool(currentMin, currentMax);
            }

            // If empty, auto-reset
            if (numberPool.length === 0) {
                fillPool(currentMin, currentMax);
                showMessage("Pool was empty. Restarted automatically!", false);
            }

            // If drawing more than available, reset first
            if (numberPool.length < count) {
                fillPool(currentMin, currentMax);
                showMessage("Not enough numbers left. Reshuffled!", false);
            }

            // Draw
            let drawnNumbers = [];
            for (let i = 0; i < count; i++) {
                let num = numberPool.pop(); 
                drawnNumbers.push(num);
                addResultPill(num);
            }

            // Update UI
            uniqueInfo.textContent = `Numbers left in pool: ${numberPool.length}`;
            
            display.classList.remove('pop-animation');
            void display.offsetWidth; 
            display.classList.add('pop-animation');
            
            if (drawnNumbers.length === 1) {
                display.textContent = drawnNumbers[0];
            } else {
                display.textContent = drawnNumbers.join(', ');
                display.style.fontSize = "4rem"; 
            }
        }

        // 3. MANUAL RESET
        function forceReset() {
            const min = parseInt(minInput.value);
            const max = parseInt(maxInput.value);
            fillPool(min, max);
            display.textContent = "?";
            display.style.fontSize = ""; 
        }

        window.onload = () => forceReset();
        document.getElementById('generate-button').addEventListener('click', generate);

    </script>
</body>
</html>